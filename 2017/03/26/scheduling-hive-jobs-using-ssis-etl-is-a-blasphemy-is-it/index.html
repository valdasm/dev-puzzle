<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" itemscope="" itemtype="http://schema.org/WebSite"> <head> <meta charset="utf-8"/> <meta name="description" itemprop="description" content="" /> <meta name="keywords" itemprop="keywords" content="HDInsight, SSIS, SQL Server" /> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"/> <!-- <meta name="google-site-verification" content="asdfasdf" /> --> <meta name="og:site_name" itemprop="name" content="Valdas Maksimavičius"/> <meta name="og:type" content="article" /> <meta name="og:locale" content="en_US" /> <meta name="og:image" content="https://www.valdas.blog/images/2017/03/StartMenu.jpg"/><meta name="twitter:image" content="https://www.valdas.blog/images/2017/03/StartMenu.jpg"/><meta name="og:image:width" content="736"/> <meta name="twitter:image:width" content="736"/><meta name="og:image:height" content="620"/> <meta name="twitter:image:height" content="620"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image:alt" content="Main picture"/> <meta name="twitter:account_id" content="1525926511" /> <meta name="twitter:creator" content="@VMaksimavicius"/> <meta name="twitter:site" content="@VMaksimavicius"/> <meta name="twitter:title" property="og:title" content="Scheduling Hive jobs using SSIS ETL is a blasphemy. Is it?"/> <meta name="twitter:description" property="og:description" content=""/> <meta name="twitter:url" property="og:url" content="https://www.valdas.blog/2017/03/26/scheduling-hive-jobs-using-ssis-etl-is-a-blasphemy-is-it/"/> <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="valdas.blog" /> <link rel="shortcut icon" href="/favicon.ico?"/> <link rel="apple-touch-icon" href="/favicon.ico?"/> <link rel="alternate" type="application/rss+xml" title="RSS for valdas.blog" href="https://www.valdas.blog/rss.xml"/> <link rel="stylesheet" href="/css/layout.css?"/> <link rel="stylesheet" href="/css/icons.css?"/> <link rel="canonical" href="https://www.valdas.blog/2017/03/26/scheduling-hive-jobs-using-ssis-etl-is-a-blasphemy-is-it/" itemprop="url" /> <!-- <link rel="amphtml" href="https://www.valdas.blog/2017/03/26/scheduling-hive-jobs-using-ssis-etl-is-a-blasphemy-is-it/" /> --> <title>Scheduling Hive jobs using SSIS ETL is a blasphemy. Is it? </title> </head> <body> <div class="wrapper"> <aside class="header-toggle unprintable" id="header-toggle" title="Show the menu" onclick="$('#header').show();$('#header-toggle').hide();">&#9776;</aside> <header class="header" id="header"> <div class="face"> <a href="/about-me/"> <img src="https://www.valdas.blog/images/valdas-maksimavicius-192x192.png" class="photo" alt="Valdas Maksimavičius"/> </a> </div> <nav> <ul class="menu social notranslate"> <li><a href="/rss.xml" re="nofollow" title="Subscribe to my RSS feed"><i class="icon icon-rss notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://github.com/valdasm" rel="nofollow" title="My GitHub profile"><i class="icon icon-github notranslate" aria-hidden="true"></i></a></li> <li><a itemprop="sameAs" href="https://www.linkedin.com/in/valdasm" rel="nofollow" title="My LinkedIn profile"><i class="icon icon-linkedin notranslate" aria-hidden="true"></i></a></li> <li><a href="mailto:valdas@maksimavicius.eu" rel="nofollow" title="Email me any time"><i class="icon icon-mail notranslate" aria-hidden="true"></i></a></li> </ul> <ul class="menu"> <li><a href="/" title="Home page">Home</a></li> <li><a href="/best/" title="Recommended reading">Recommended</a></li> <li><a href="/archive/" title="All archives">Archive</a></li> <li><a href="/notes/" title="Notes">Notes</a></li> <!-- <li><a href="/talks/" title="Public speaking, presentations">Talks</a></li> --> <li><a href="http://eepurl.com/dcCxAD" target="_blank" title="Subscribe">Subscribe</a></li> <li><a href="/about-me/" title="About me">About</a></li> </ul> </nav> </header> </div> <section itemscope="" itemtype="http://schema.org/BlogPosting"> <div itemprop="dateModified" content="2017-03-26T00:00:00+00:00"></div> <div itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="https://www.valdas.blog/images/valdas-maksimavicius-1400x1400.png"/> </div> <div itemscope="" itemprop="publisher" itemtype="http://schema.org/Organization"> <meta itemprop="name" content="Valdas' Blog"/> <div itemprop="logo" itemscope="" itemtype="http://schema.org/ImageObject"> <meta itemprop="url" content="https://www.valdas.blog/images/valdas-maksimavicius-192x192.png"/> <meta itemprop="height" content="192"/> <meta itemprop="width" content="192"/> </div> </div> <div class="wrapper"> <header> <h1 itemprop="name headline mainEntityOfPage">Scheduling Hive jobs using SSIS ETL is a blasphemy. Is it?</h1> <ul class="subline"> <li> <time itemprop="datePublished" datetime="2017-03-26T00:00:00+00:00"> 26 March 2017 </time> </li> <li class="printable" itemscope="" itemprop="author" itemtype="http://schema.org/Person"> <span itemprop="name">Valdas Maksimavičius</span> </li> <!-- <li class="unprintable"> <i class="icon icon-comments"></i> <a href="https://www.valdas.blog/2017/03/26/scheduling-hive-jobs-using-ssis-etl-is-a-blasphemy-is-it/#disqus_thread" itemprop="discussionUrl">comments</a> </li> --> </ul> </header> <main> <article class="main" itemprop="articleBody"> <div > <p>Here’s a conversation I had a while ago with my colleague:</p> <ul> <li>SSIS ETL is the last tool to schedule Hive jobs on a separate cluster”</li> <li>But what if … - I muttered.</li> <li>There are so many great tools you can choose from, Apache Oozie, <a href="https://nifi.apache.org/docs/nifi-docs/html/user-guide.html">Nifi</a> ,or even the cron. And you chose the worst.<!--more--></li> </ul> <p>For a moment let’s forget about Apache Oozie and similar services. Here are the prerequisites:</p> <ul> <li>Data is in SQL Server</li> <li>SSIS is being used across the organisation (you’ll definitely find someone when help needed)</li> <li>HDInsight in Azure cannot access servers on-premises. Only push from on-premises is viable.</li> <li>SSIS is being used to upload data to Azure Storage.</li> </ul> <p>Having this in mind, SSIS ETL doesn’t seem to be that bad. But is it working properly? In January 2017 I was so fed up withconstant fights with Azure and HDInsight. Azure Feature Pack for SSIS supported HDInsight up to 3.2. Yes, the Windows version. My cluster (v 3.4) was absolutely invisible. But then, in March, Microsoft releases <a href="https://msdn.microsoft.com/en-us/library/mt146770.aspx">a new version</a>. Brilliant!!! <a href="https://msdn.microsoft.com/en-us/library/mt146771.aspx">Detailed description of Hive task</a></p> <p><strong>Limitation</strong> If you run a script file, there are no options to inject Hive environment variables. (Sick suggestion) Inject variables in Hive script before running Azure HDInsight Hive Task. If you run in-line script, then inject as you wish in SSIS variables.</p> <p><strong>How it works</strong></p> <ul> <li>HDInsightConnection - Azure HDInsight Connection Manager (DNS, user name and password)</li> <li>AzureStorageConnection - Azure Storage Connection Manager (account name and key)</li> <li>BlobContainer - this is only necessary if you want to download the script execution output and error logs</li> <li>LocalLogFolder - this is only necessary if you want to download the script execution output and error logs locally.</li> <li>Script - Hive script, if no file specified</li> <li>BlobName - the script in Azure Blob Storage. Path to file after container.</li> <li>ExternalStorageAccountName and ExternalBlobContainer - the script storage</li> </ul> <p><strong>Parameters</strong> A standard way to inject values into Azure HDInsight Hive Task</p> <figure class="jb_picture"><img class="img-responsive" itemprop="image" alt="Main picture" src="/images/2017/03/StartMenu.jpg" /></figure> <p><strong>Final remarks</strong> Don’t forget to whitelist your SSIS ETL server in HDInsight VNet :)</p> </div> </article> </main> <header> <p class="unprintable"><a href='/tag/software/' class='tag notranslate'>software</a></p> <nav class="buttons notranslate"> <a href="http://www.facebook.com/sharer/sharer.php?u=https://www.valdas.blog/2017/03/26/scheduling-hive-jobs-using-ssis-etl-is-a-blasphemy-is-it/" title="Share on Facebook" class="button" rel="nofollow"> <span class="count count-facebook">0</span> <i class="icon icon-facebook notranslate" aria-hidden="true"></i> </a> <a href="https://www.linkedin.com/cws/share?url=https://www.valdas.blog/2017/03/26/scheduling-hive-jobs-using-ssis-etl-is-a-blasphemy-is-it/" title="Share on LinkedIn" class="button" rel="nofollow"> <span class="count count-linkedin">0</span> <i class="icon icon-linkedin notranslate" aria-hidden="true"></i> </a> <a href="http://reddit.com/submit?url=https://www.valdas.blog/2017/03/26/scheduling-hive-jobs-using-ssis-etl-is-a-blasphemy-is-it/%3F2017-13&amp;title=Scheduling+Hive+jobs+using+SSIS+ETL+is+a+blasphemy.+Is+it%3F" title="Share on Reddit" class="button" rel="nofollow"> <span class="count count-reddit">0</span> <i class="icon icon-reddit notranslate" aria-hidden="true"></i> </a> </nav> </header> </div> <!-- --> <div class="disqus" role="complementary"> <div id="disqus_thread" class="disqus-thread"></div> <script> var disqus_config = function () { this.page.url = document.location.href.split('?')[0].split('#')[0]; this.page.identifier = this.page.url.split('.html')[0]; }; (function() { var d = document, s = d.createElement('script'); s.src = '//valdas-blog.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript> <div> <p class="red"> JavaScript is disabled in your browser, that's why you can't see comments under this post. </p> </div> </noscript> </div> </section> <div class="wrapper"> <footer class="footer"> <p> &copy; <span itemscope="" itemprop="copyrightHolder" itemtype="http://schema.org/Person"> <span itemprop="name">Valdas Maksimavičius</span> </span> <span itemprop="copyrightYear">2018</span> </p> </footer> </div> <script src="//code.jquery.com/jquery-1.9.0.min.js"></script> <script src="/js/all.js?"></script> <script>var disqus_shortname = 'valdas-blog';</script> <script id="dsq-count-scr" src="//valdas-blog.disqus.com/count.js" async="async"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-53567712-3', 'auto'); ga('send', 'pageview'); </script> <script language="javascript" type="text/javascript"> Cd=document;Cr="&"+Math.random();Cp="&s=1"; Cd.cookie="b=b";if(Cd.cookie)Cp+="&c=1"; Cp+="&t="+(new Date()).getTimezoneOffset(); if(self!=top)Cp+="&f=1"; </script> <script language="javascript1.1" type="text/javascript"> if(navigator.javaEnabled())Cp+="&j=1"; </script> <script language="javascript1.2" type="text/javascript"> if(typeof(screen)!='undefined')Cp+="&w="+screen.width+"&h="+ screen.height+"&d="+(screen.colorDepth?screen.colorDepth:screen.pixelDepth); </script> </body> </html>
